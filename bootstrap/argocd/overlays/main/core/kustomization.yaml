apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- ../../../base
- 00-local-path-provisioner.yaml
- 00-gateway-api-crds.yaml
- 00-repo-registry-app.yaml
- 01-external-dns.yaml
- 01-hcloud-ccm.yaml
- tenant-infrastructure.yaml
# Gateway and DNS deployed via separate ArgoCD apps (main environment only)
- 04-gateway-config.yaml
# Hetzner DNS webhook for cert-manager DNS-01 challenges
- 01-cert-manager-webhook-hetzner.yaml
# AgentGateway HTTPRoute (main environment only, Wave 6 - after gateway-config)
- 06-agentgateway-httproute.yaml

patches:
- path: patches/repo-server-ksops-init.yaml
  target:
    kind: Deployment
    name: argocd-repo-server
    namespace: argocd
